---
title: 주소 매핑의 기본 개념
description: 가상 주소와 물리 주소의 개념을 이해하고, 이 둘이 어떻게 매핑되는지 학습합니다. 초보자 친화적인 설명으로 시작합니다.
slug: address-mapping-basics
sidebar_position: 2
date: 2024-01-15
---

## 🎯 이번 시간의 목표

- 가상 주소와 물리 주소의 차이 이해하기
- 주소 매핑이 왜 필요한지 배우기
- 동적 주소 변환(Dynamic Address Translation) 개념 이해하기

---

## 📍 주소(Address)란?

프로그램이 메모리에서 데이터를 찾기 위해서는 **데이터가 어디에 있는지 알아야 합니다**.

이것을 명시하는 것이 바로 **주소(Address)**입니다.

### 집 주소에 비유하면

```
집의 주소: 서울시 강남구 테헤란로 123
       ↓
누군가를 찾을 때: "123번지에 가면 만날 수 있어"
```

마찬가지로:
```
메모리 주소: 2048번지
       ↓
데이터를 찾을 때: "2048번지에 가면 데이터가 있어"
```

---

## 🔍 두 가지 주소의 종류

### 1️⃣ 가상 주소 (Virtual Address)

**다른 이름:** 논리 주소(Logical Address)

```
프로그래머 또는 프로그램이 생각하는 주소
```

**특징:**
- 프로그래머가 프로그램 코드에 작성한 주소
- 프로그램 관점에서는 항상 0부터 시작
- 프로그램마다 독립적인 주소 공간을 가짐
- 하드웨어와 무관하게 작동

**예시:**
```
프로그램 A가 사용하는 주소: 0번부터 시작
프로그램 B가 사용하는 주소: 0번부터 시작
(각각 독립적으로 0부터 시작하는 것이 가능)
```

### 2️⃣ 물리 주소 (Physical Address)

**다른 이름:** 실제 주소, 메모리 주소

```
실제 메모리(RAM)에서의 주소
```

**특징:**
- 실제 메모리 위치를 나타내는 주소
- 컴퓨터의 물리적 RAM에만 존재
- 모든 프로그램이 공유하는 실제 메모리 공간
- 하드웨어 칩에 인쇄된 주소

**예시:**
```
메인 메모리의 실제 주소: 0번부터 RAM 크기까지
예) 16GB 메모리라면 0번부터 약 16,000,000,000번까지
```

---

## 🔗 왜 주소 매핑이 필요한가?

### 상황 설정

여러 프로그램이 동시에 실행된다고 가정해봅시다:

- **프로그램 A**: 가상 주소 100번을 요청
- **프로그램 B**: 가상 주소 100번을 요청

⚠️ **문제 발생!**

```
둘 다 100번을 요청하는데, 메모리의 100번은 하나밖에 없습니다.
그럼 누가 100번을 사용해야 할까요?
```

### 해결책: 주소 매핑

```
프로그램 A의 가상 주소 100번 → (변환) → 물리 주소 5000번
프로그램 B의 가상 주소 100번 → (변환) → 물리 주소 8000번
```

이렇게 각 프로그램의 가상 주소를 다른 물리 주소로 매핑하면 충돌을 피할 수 있습니다!

---

## 🔄 동적 주소 변환 (Dynamic Address Translation)

### 개념

```
프로그램이 요청한 가상 주소를 실제 물리 주소로 자동 변환하는 것
```

### 장점

| 항목 | 설명 |
|------|------|
| **투명성** | 프로그래머는 변환을 신경쓰지 않음 |
| **유연성** | 프로그램들이 자유롭게 메모리를 사용할 수 있음 |
| **보안** | 각 프로그램이 자신의 메모리 영역만 접근 가능 |
| **효율성** | 물리 메모리를 최적으로 활용할 수 있음 |

---

## 📊 주소 매핑의 흐름

### CPU가 데이터를 요청할 때

```
1단계: CPU가 가상 주소 요청
       └─> "주소 1000번의 데이터를 줘"

2단계: 메모리 관리 유닛(MMU)이 변환
       └─> "가상 1000번은 물리 5000번이네"

3단계: 변환된 물리 주소로 메모리 접근
       └─> 메모리의 5000번 위치에서 데이터 읽음

4단계: 데이터를 CPU로 반환
       └─> CPU가 데이터를 받음
```

### 처리 순서

```
[가상 주소]
    ↓
[주소 변환 테이블 조회]
    ↓
[물리 주소 결정]
    ↓
[메모리 접근]
    ↓
[데이터 반환]
```

---

## 📋 매핑 테이블

### 매핑 테이블이란?

```
가상 주소 ──→ [매핑 테이블] ──→ 물리 주소
```

매핑 테이블은 가상 주소와 물리 주소의 관계를 기록해놓은 표입니다.

### 예시

```
가상 주소 | 물리 주소
---------|----------
   0     |   2048
   1     |   2049
   2     |   5000
   3     |   5001
   ...   |   ...
```

### 매핑 테이블의 역할

```
프로그램: "주소 2번의 데이터를 줘"
          ↓
테이블 조회: "주소 2는 물리 5000번이야"
          ↓
메모리: "물리 5000번의 데이터를 반환합니다"
          ↓
프로그램: "데이터를 받음!"
```

---

## 🔑 핵심 개념 정리

### 가상 주소 공간 (Virtual Address Space)

```
프로그램이 사용할 수 있는 가상 주소들의 집합

예) 32비트 CPU → 최대 2³² = 4GB의 가상 주소 공간
```

### 물리 주소 공간 (Physical Address Space)

```
실제 메모리에 존재하는 물리 주소들의 집합

예) 16GB 메모리 설치 → 16GB만큼의 물리 주소 공간
```

### 주소 매핑

```
가상 주소 공간과 물리 주소 공간을 연결하는 과정

가상: 0 ~ 4GB (32비트)
물리: 0 ~ 16GB (실제 메모리)

⚠️ 가상 주소 공간이 물리 주소 공간보다 클 수도 있음!
   이때 나머지는 스왑 영역에 저장됨
```

---

## 💡 메모리 관리자의 역할

메모리 관리자가 해야 할 일:

### 1️⃣ 메모리 할당 (Memory Allocation)

```
어느 부분에 프로세스를 배치할 것인가?
어떻게 배치할 것인가?
```

### 2️⃣ 메모리 교체 (Memory Replacement)

```
물리 메모리가 부족하면?
어떤 데이터를 스왑 영역으로 내보낼 것인가?
```

### 3️⃣ 주소 변환 (Address Translation)

---
## 🎓 용어 정리

| 용어 | 설명 | 예시 |
|------|------|------|
| **가상 주소** | 프로그램이 보는 주소 | 프로그램 내 변수의 주소 |
| **물리 주소** | 실제 메모리 위치 | RAM 칩에서의 위치 |
| **주소 공간** | 주소들의 범위 | 0 ~ 4GB (32비트) |
| **매핑** | 가상→물리 변환 | 테이블로 기록 |
| **MMU** | 변환을 담당하는 장치 | CPU 내부의 하드웨어 |

---

## ❓ 자주 묻는 질문(FAQ)

**Q: 왜 이렇게 복잡하게 두 가지 주소를 사용하나요?**

A: 각 프로그램이 독립적으로 움직이도록 하기 위함입니다. 각 프로그램은 자신만의 주소 공간이 있다고 생각하고 편하게 프로그래밍할 수 있습니다.

**Q: 주소 변환에 시간이 걸리지 않나요?**

A: 네, 시간이 걸립니다. 하지만 현대의 CPU는 이 변환을 매우 빠르게 처리하도록 설계되어 있고, TLB(Translation Lookaside Buffer) 같은 캐시를 사용해서 속도를 높입니다.

**Q: 모든 주소 변환이 매번 일어나나요?**

A: 네, 프로그램이 메모리에 접근할 때마다 변환이 일어납니다. 운영체제가 자동으로 처리하기 때문에 프로그래머는 신경쓰지 않아도 됩니다.

---
