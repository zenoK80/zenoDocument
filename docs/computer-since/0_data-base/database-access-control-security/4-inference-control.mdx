---
title: "추론 제어: 기존 데이터를 통한 추론 방지"
description: "추론 제어: 기존 데이터를 통한 추론 방지에 대해 초보자도 쉽게 이해할 수 있도록 설명합니다."
slug: "/database-access-control-security/4-inference-control"
sidebar_label: "추론 제어"
date: "2026-02-21"
---

## 🔐 데이터베이스 보안, 왜 중요할까?

우리가 매일 사용하는 인터넷 쇼핑몰, 은행 앱, SNS 등 거의 모든 서비스 뒤에는 **데이터베이스(DB)**가 있습니다. 데이터베이스란 쉽게 말해 **정보를 체계적으로 저장해 놓은 거대한 창고**입니다. 여러분의 이름, 전화번호, 계좌 잔액, 구매 내역 등 민감한 정보가 모두 이 창고 안에 들어 있죠.

그런데 만약 이 창고의 문이 활짝 열려 있다면 어떨까요? 아무나 들어와서 물건을 가져가거나, 바꿔치기 하거나, 심지어 창고를 통째로 망가뜨릴 수도 있을 겁니다. **데이터베이스 보안**이란 바로 이 창고의 문을 누가, 언제, 어떻게 열 수 있는지를 철저하게 관리하는 모든 기술과 방법을 말합니다.

보안이라는 기술은 워낙 범위가 넓습니다. 소프트웨어적인 보안, 하드웨어(장비) 보안, 네트워크 보안 등 다양한 영역이 있는데, 이 문서에서는 **데이터베이스와 직접 관련된 보안 기법**에 집중합니다. 특히 그중에서도 **추론 제어(Inference Control)**라는 개념을 중심으로, 데이터베이스 보안의 전체 그림을 함께 살펴보겠습니다.

> 💡 **핵심 질문**: 직접 접근이 차단된 비밀 데이터를, 공개된 데이터만으로 알아낼 수 있다면? 그것을 어떻게 막을 수 있을까?

---

## 🗂️ 데이터베이스 보안 관리 방법 — 전체 그림 이해하기

데이터베이스를 안전하게 지키기 위한 보안 관리 방법은 크게 **세 가지**로 나눌 수 있습니다. 추론 제어를 제대로 이해하려면, 먼저 이 세 가지 방법의 전체적인 구조를 알아야 합니다. 마치 집을 보호할 때 현관문 잠금장치(접근제어), 택배 배송 경로 감시(정보 흐름 제어), 그리고 창문 너머로 안을 엿보는 것을 막는 것(추론 제어)이 모두 필요한 것과 같습니다.

### 1️⃣ 접근제어 (Access Control)

**왜 필요한가?** 사용자가 데이터베이스에 접근하는 경로는 매우 다양합니다. 응용 프로그램, 웹 브라우저, 모바일 앱, 심지어 서버에 직접 연결하는 방법까지 있죠. 이 모든 경로를 통해 아무나 데이터에 접근할 수 있다면 큰 문제가 됩니다.

접근제어란 마치 **건물 출입구의 보안 게이트**와 같습니다. 출입증(아이디)과 비밀번호(패스워드)를 확인하고, 해당 사용자가 어떤 역할(Role)을 가지고 있는지 검증한 뒤에야 문을 열어주는 것입니다. 접근 권한이 없는 사람은 아예 데이터베이스 안으로 들어올 수 없게 막아놓는 것이죠.

### 2️⃣ 정보 흐름 제어 (Information Flow Control)

**왜 필요한가?** 접근이 허용된 후에도 문제는 발생할 수 있습니다. 사용자가 서버에 정보를 요청하면 그 정보는 여러 서버와 네트워크를 거쳐서 전달됩니다. 마치 **택배가 여러 물류센터를 거쳐 배송되는 것**과 같죠.

이 과정에서 해커가 중간에 정보를 가로채서 내용을 바꿔치기(변조)하거나, 훔쳐볼 수 있습니다. 정보 흐름 제어란 **권한이 없는 데이터 사이에서 부당한 데이터 전달이 일어나지 않도록** 통제하는 기술입니다. 편지를 보낼 때 중간에 누군가 편지를 열어보거나 내용을 바꾸지 못하게 봉인하는 것과 비슷합니다.

### 3️⃣ 추론 제어 (Inference Control) — 이 문서의 핵심!

**왜 필요한가?** 접근제어로 직접 접근을 막았고, 정보 흐름 제어로 전송 과정도 안전하게 만들었습니다. 그런데 **이것만으로는 부족합니다**. 왜냐하면 직접 접근하지 않고도, **공개된 데이터를 분석해서 비밀 정보를 알아낼 수 있기 때문**입니다. 이것이 바로 **추론(Inference)**이고, 이를 막는 것이 **추론 제어**입니다.

> 🔑 **추론 제어**란 기존에 공개된(접근 가능한) 데이터를 분석·추론하여 보안이 설정된 비밀 데이터를 알아내는 것을 **방지**하는 보안 기법입니다.

---

## 🧠 추론 제어 — 핵심 원리 깊이 이해하기

### 추론(Inference)이란 무엇인가?

추론이란 **기존에 알고 있는 정보를 바탕으로 새로운 정보를 유추해내는 행위**입니다. 일상생활에서도 우리는 끊임없이 추론합니다.

예를 들어봅시다. 친구가 "오늘 점심에 회사 근처 식당에서 김치찌개를 먹었어"라고 말했다고 합시다. 여러분은 그 친구의 회사 위치를 알고 있고, 그 근처에 김치찌개를 파는 식당이 딱 하나라면? **직접 물어보지 않아도** 그 친구가 어느 식당에서 밥을 먹었는지 알 수 있겠죠. 이것이 바로 **추론**입니다.

데이터베이스에서도 마찬가지입니다. 비밀 데이터에는 직접 접근할 수 없지만, **공개된 데이터들을 조합하고 분석하면 비밀 데이터를 역으로 알아낼 수 있는 경우**가 있습니다. 이것이 데이터베이스 보안에서 큰 위협이 됩니다.

### 통계 추론 (Statistical Inference) — 가장 대표적인 추론 공격

통계 추론은 추론 제어에서 가장 핵심적인 개념입니다. 차근차근 설명하겠습니다.

**상황을 가정해봅시다.** 어떤 회사의 데이터베이스에 직원 급여 정보가 있습니다. 개별 직원의 급여(로데이터, Raw Data)는 **보안이 걸려 있어서** 일반 사용자는 볼 수 없습니다. 하지만 부서별 평균 급여, 전체 직원 수, 부서별 직원 수 같은 **통계 데이터는 공개**되어 있습니다.

```
[보안 설정된 데이터 - 접근 불가] 🔒
├── 김철수: 월급 500만원
├── 이영희: 월급 600만원
└── 박민수: 월급 450만원

[공개된 통계 데이터 - 누구나 접근 가능] 🔓
├── 개발팀 평균 급여: 516만원
├── 개발팀 인원: 3명
└── 개발팀 총 급여합계: 1,550만원
```

언뜻 보면 통계 데이터만으로는 개인의 급여를 알 수 없을 것 같습니다. 하지만 만약 공격자가 개발팀에 김철수와 이영희가 있다는 것을 알고 있고, 어떤 추가 조건을 걸어서 **"개발팀에서 김철수와 이영희만 해당하는 통계"**를 뽑아낼 수 있다면 어떨까요?

- 전체 합계: 1,550만원
- 김철수 + 이영희의 합계 (추가 쿼리로 알아냄): 1,100만원
- **박민수의 급여 = 1,550 - 1,100 = 450만원** 🚨

이렇게 **통계 데이터를 역추적하여 개인의 세부 데이터를 알아내는 것**이 바로 **통계 추론**입니다. 공개된 정보만 사용했는데도 보안이 걸린 비밀 정보가 노출되어 버린 것이죠.

> ⚠️ **통계 추론의 위험성**: 공개된 통계 데이터를 교차 분석하면, 보안이 걸린 개별 데이터(로데이터)를 역으로 추적해낼 수 있습니다. 직접 해킹하지 않아도 비밀이 새어나가는 셈입니다.

### 추론 제어가 어려운 이유

추론 제어가 다른 보안 기법보다 까다로운 이유는, **공격자가 합법적인 경로로 합법적인 데이터에 접근하기 때문**입니다. 접근제어는 통과했고, 정보 흐름도 정상적입니다. 단지 **공개된 정보들을 똑똑하게 조합**하는 것뿐이죠. 마치 퍼즐 조각을 하나씩 모아서 전체 그림을 완성하는 것과 같습니다.

---

## 🛡️ 추론을 막는 구체적인 방법들

추론 공격을 방지하기 위해 여러 가지 기법이 사용됩니다. 각각의 방법을 실생활 비유와 함께 살펴보겠습니다.

### 방법 1: 데이터 분할 (Data Partitioning)

**개념**: 관련된 데이터를 여러 곳에 나누어 저장하여, 한 곳의 데이터만으로는 의미 있는 추론을 할 수 없게 만드는 방법입니다.

마치 **보물 지도를 여러 조각으로 찢어서 각각 다른 금고에 보관하는 것**과 같습니다. 한 조각만 가지고는 보물의 위치를 알 수 없죠.

### 방법 2: 중요 데이터 감추기 (Data Masking/Suppression)

**개념**: 추론의 단서가 될 수 있는 핵심 데이터를 아예 결과에서 제외하거나, 가려서 보여주는 방법입니다.

예를 들어, 특정 부서에 직원이 1~2명밖에 없으면 통계 데이터만으로도 개인을 특정할 수 있습니다. 이런 경우 **해당 통계 결과 자체를 표시하지 않는 것**입니다. "검색 결과가 3건 미만인 경우 표시하지 않음"이라는 규칙을 두는 것이죠.

### 방법 3: 노이즈 데이터 삽입 (Data Perturbation)

**개념**: 실제 통계 결과에 **의미 없는 임의의 데이터(노이즈)**를 섞어 넣어서, 추론의 정확도를 떨어뜨리는 방법입니다.

마치 **보물 지도 위에 가짜 표시를 여러 개 그려놓는 것**과 같습니다. 진짜 보물 위치가 표시되어 있긴 하지만, 가짜 표시들 사이에서 진짜를 구별할 수 없게 만드는 것이죠.

```
[원래 통계 결과]
개발팀 평균 급여: 516만원 (정확한 값)

[노이즈 삽입 후 통계 결과]
개발팀 평균 급여: 520만원 (약간의 오차 포함)
```

통계의 전체적인 경향은 유지되지만, 정확한 값이 아니기 때문에 역추적을 통한 개별 데이터 추론이 어려워집니다.

### 방법 4: 코드 난독화 (Code Obfuscation)

**개념**: 응용 프로그램 자체에 **다른 코드를 섞어 넣어서**, 데이터 분석이나 추론 과정을 방해하는 방법입니다. 불필요한 코드를 의도적으로 삽입하여 공격자가 프로그램의 동작 방식을 파악하기 어렵게 만듭니다.

### 방법 5: 다중 인스턴스화 (Polyinstantiation)

**개념**: 같은 데이터에 대해 **보안 등급별로 다른 값을 저장**하는 기법입니다. 낮은 등급의 사용자가 보는 값과 높은 등급의 사용자가 보는 값이 다르게 설정되어, 낮은 등급에서 높은 등급의 실제 데이터를 추론할 수 없게 만듭니다.

:::info 추론 방지 기법 요약
| 방법 | 핵심 아이디어 | 비유 |
|------|-------------|------|
| **데이터 분할** | 데이터를 나누어 저장 | 보물지도를 조각으로 찢어 보관 |
| **데이터 감추기** | 소수 그룹의 결과 숨김 | 인원이 적은 반의 성적을 비공개 |
| **노이즈 삽입** | 임의 데이터로 결과 교란 | 가짜 표시를 섞어 진짜를 숨김 |
| **코드 난독화** | 프로그램에 방해 코드 삽입 | 미로에 가짜 길을 추가 |
| **다중 인스턴스화** | 등급별로 다른 값 저장 | 같은 문서의 공개용/비공개용 버전 |
:::

---

## 🔍 추론 제어와 관련된 개념: 집계(Aggregation)

추론 제어를 이해하려면 **집계(Aggregation)**라는 개념도 함께 알아야 합니다. 집계와 추론은 밀접하게 연결되어 있기 때문입니다.

### 집계란?

집계란 **낮은 보안 등급의 정보들을 대량으로 모아서, 높은 보안 등급의 정보를 알아내는 공격 기법**입니다.

비유하자면 이렇습니다. 퍼즐 한 조각은 아무 의미가 없습니다. 하지만 조각을 수백 개 모으면 전체 그림이 보이죠. 마찬가지로 개별적으로는 별 의미 없는 공개 데이터들을 **대량으로 수집하고 종합하면**, 보안이 걸린 민감한 정보를 파악할 수 있게 됩니다.

### 집계와 추론의 차이

| 구분 | 집계 (Aggregation) | 추론 (Inference) |
|------|-------------------|-----------------|
| **방법** | 대량의 낮은 등급 데이터를 **모아서** 높은 등급 정보 파악 | 공개된 데이터를 **분석·유추해서** 비밀 정보 파악 |
| **비유** | 퍼즐 조각을 모아 전체 그림 완성 | 단서를 분석해서 범인을 추리 |
| **핵심** | 양(量)의 문제 | 질(質, 분석력)의 문제 |

둘 다 **직접 접근하지 않고 비밀 정보를 알아낸다**는 점에서 공통점이 있으며, 추론 제어 기법은 이 두 가지를 모두 방어하는 것을 목표로 합니다.

---

## 💻 실제 예시로 이해하는 추론 공격과 방어

### ❌ 추론 공격이 가능한 위험한 예시

아래는 통계 쿼리를 통해 개인 정보를 추론하는 시나리오입니다.

```sql
-- 📌 시나리오: 직원 테이블에서 통계 데이터만 조회 가능
-- 개별 급여 데이터는 접근 불가 (보안 설정됨)

-- 1단계: 개발팀 전체의 급여 합계를 구합니다
SELECT SUM(salary) AS total_salary  -- 급여 합계를 구하는 함수
FROM employee                       -- 직원 테이블에서
WHERE department = '개발팀';         -- 부서가 개발팀인 사람만
-- 결과: 1,550만원

-- 2단계: 개발팀에서 특정 조건으로 범위를 좁힙니다
SELECT SUM(salary) AS partial_salary  -- 급여 합계를 구합니다
FROM employee                         -- 직원 테이블에서
WHERE department = '개발팀'            -- 개발팀이면서
  AND name != '박민수';                -- 박민수를 제외한 사람들의 합계
-- 결과: 1,100만원

-- 🚨 추론 결과: 박민수의 급여 = 1,550 - 1,100 = 450만원!
-- 직접 접근하지 않았지만, 개인 급여가 노출됨
```

**코드 상세 설명:**

- `SUM(salary)`: 급여(salary) 컬럼의 값을 모두 합산하는 집계 함수입니다. 개별 값이 아닌 합계만 반환하므로 언뜻 안전해 보입니다.
- `WHERE department = '개발팀'`: 개발팀 소속 직원만 필터링합니다.
- `AND name != '박민수'`: 여기가 핵심입니다. 특정인을 제외하는 조건을 추가함으로써, 전체 합계에서 그 사람의 값을 빼기(역산)할 수 있게 됩니다.
- 두 쿼리의 결과를 빼면 박민수 개인의 급여가 정확하게 드러납니다. **통계 함수만 사용했는데도 개인 정보가 노출**된 것입니다.

:::danger 이것이 추론 공격의 위험성입니다
위 예시에서 공격자는 **합법적인 통계 쿼리만 사용**했습니다. 접근제어를 통과했고, 정보 흐름도 정상입니다. 하지만 두 개의 쿼리 결과를 조합하여 보안이 걸린 개인 급여를 알아냈습니다. 이것이 추론 제어가 반드시 필요한 이유입니다.
:::

### ✅ 추론을 방어하는 올바른 예시

```sql
-- 📌 방어 기법 1: 최소 응답 크기 제한
-- 쿼리 결과가 3건 미만이면 결과를 반환하지 않는 정책 설정

-- 이 쿼리는 결과가 2건이므로 시스템이 자동으로 차단합니다
SELECT SUM(salary) AS partial_salary
FROM employee
WHERE department = '개발팀'
  AND name != '박민수';
-- ❌ 결과: "보안 정책 위반 - 결과 행 수가 최소 기준 미달"

-- 📌 방어 기법 2: 노이즈 데이터 삽입
-- 시스템이 통계 결과에 랜덤 오차를 자동으로 추가합니다
SELECT SUM(salary) AS total_salary  -- 실제 합계는 1,550이지만
FROM employee
WHERE department = '개발팀';
-- 결과: 1,580만원 (시스템이 ±5% 범위의 노이즈를 자동 추가)
-- 이 값으로는 정확한 개인 급여를 역산할 수 없음

-- 📌 방어 기법 3: 쿼리 중복 검사
-- 시스템이 이전 쿼리와 현재 쿼리를 비교하여
-- 두 결과를 조합하면 개인정보가 노출될 수 있는지 검사합니다
-- 위험이 감지되면 쿼리를 차단합니다
```

**코드 상세 설명:**

- **방어 기법 1 (최소 응답 크기 제한)**: 통계 쿼리의 결과에 포함되는 레코드 수가 일정 기준(예: 3건) 미만이면 아예 결과를 보여주지 않습니다. 소수의 레코드로 구성된 통계는 개인을 특정하기 쉽기 때문입니다.
- **방어 기법 2 (노이즈 삽입)**: 실제 합계값에 시스템이 자동으로 작은 오차를 추가합니다. 전체적인 통계 경향은 유지하면서도, 정확한 역산을 불가능하게 만듭니다.
- **방어 기법 3 (쿼리 중복 검사)**: 시스템이 사용자의 이전 쿼리 이력을 기억하고 있다가, 새로운 쿼리와 조합했을 때 개인정보가 노출될 위험이 있으면 자동으로 차단합니다.

:::tip 실무에서의 추론 방어
실무에서는 위 방법들을 **조합하여 사용**합니다. 하나의 방어 기법만으로는 모든 추론 공격을 막기 어렵기 때문입니다. 마치 집 보안을 위해 현관 잠금장치, CCTV, 경보 시스템을 **함께** 사용하는 것과 같습니다.
:::

---

## 🏛️ 접근제어 기법 — 추론 제어의 배경 지식

추론 제어를 제대로 이해하려면, 그 바탕이 되는 **접근제어 기법**을 알아야 합니다. 접근제어는 데이터베이스 보안의 기본 중의 기본이며, 추론 제어는 접근제어만으로는 막을 수 없는 위협에 대응하기 위해 탄생한 것입니다.

### DAC — 임의 접근제어 (Discretionary Access Control)

**핵심 개념**: 데이터의 **소유자가 자기 재량으로** 다른 사용자에게 권한을 부여하는 방식입니다.

마치 **집 주인이 직접 열쇠를 복사해서 친구에게 나눠주는 것**과 같습니다. 누구에게 열쇠를 줄지는 집 주인 마음대로입니다.

- **ID와 패스워드**로 사용자를 확인합니다
- 주로 **운영체제(OS)**에서 많이 사용됩니다 (예: Windows 로그인)
- 구현이 비교적 **쉽고 간단**합니다
- 권한 부여/회수를 `GRANT`와 `REVOKE` 명령어로 처리합니다

### MAC — 강제 접근제어 (Mandatory Access Control)

**핵심 개념**: 데이터(객체)에 **보안 등급**을 부여하고, 사용자(주체)에게 **허가 등급**을 부여해서, 등급에 따라 접근을 통제하는 방식입니다.

마치 **군대의 기밀 문서 등급 시스템**과 같습니다. 문서에는 극비·비밀·대외비·일반 등급이 매겨져 있고, 군인에게는 자신의 계급에 맞는 열람 등급이 부여됩니다. 대통령은 극비문서까지 볼 수 있지만, 일반 공무원은 일반 문서만 볼 수 있죠.

| 보안 등급 | 영어 | 설명 |
|----------|------|------|
| 극비 | Top Secret | 최고 수준의 기밀 |
| 비밀 | Secret | 높은 수준의 기밀 |
| 대외비 | Confidential | 외부 공개 불가 |
| 일반 | Unclassified | 누구나 접근 가능 |

- **보안성이 가장 높습니다**
- 주로 **정부기관, 군사 분야**에서 사용됩니다
- 사용자 개인의 재량이 아니라 **시스템이 강제로** 통제합니다

:::note 벨-라파듈라 모델(Bell-LaPadula Model)의 핵심 규칙
강제 접근제어에서 사용되는 대표적인 보안 모델입니다.

- **단순 보안 규칙 (No Read Up)**: 자신보다 **높은 등급의 문서는 읽을 수 없습니다**. 비밀 등급 사용자가 극비 문서를 볼 수 없는 것입니다.
- **스타(*) 무결성 규칙 (No Write Down)**: 자신보다 **낮은 등급의 객체에 정보를 쓸 수 없습니다**. 과장이 사원의 문서를 임의로 수정할 수 없는 것입니다. 이는 고등급 정보가 저등급으로 흘러내리는 것을 방지합니다.
- **강한 스타 무결성 규칙**: 자신의 등급과 **동일한 등급만** 읽고 쓸 수 있습니다.
:::

### RBAC — 역할 기반 접근제어 (Role-Based Access Control)

**핵심 개념**: 사용자 개인이 아니라 **역할(Role)**에 권한을 부여하고, 사용자에게 역할을 할당하는 방식입니다.

마치 **회사의 직급 체계**와 같습니다. "팀장"이라는 역할에는 팀원의 정보를 조회하고, 프로젝트를 승인할 수 있는 권한이 있습니다. 김철수가 팀장이 되면 팀장의 권한을 받고, 다른 부서로 이동하면 그 권한은 자동으로 새 팀장에게 넘어갑니다.

- **조직이나 기업 환경**에서 가장 많이 사용됩니다
- 역할의 추가·변경·삭제가 **유연하고 편리**합니다
- `CREATE ROLE`, `DROP ROLE` 명령어로 역할을 관리합니다

| 접근제어 방식 | 핵심 | 주 사용처 | 보안성 |
|-------------|------|----------|-------|
| **DAC** (임의) | 소유자가 권한 부여 | 운영체제 | 보통 |
| **MAC** (강제) | 등급으로 통제 | 정부/군사 | 매우 높음 |
| **RBAC** (역할) | 역할로 관리 | 기업/조직 | 높음 |

---

## 📝 권한 부여와 회수 — GRANT와 REVOKE 명령어

접근제어를 실제로 구현할 때 사용하는 핵심 SQL 명령어가 `GRANT`(권한 부여)와 `REVOKE`(권한 회수)입니다.

### GRANT — 권한을 부여하는 명령어

```sql
-- 📌 기본 문법
-- GRANT [권한] ON [테이블이름] TO [사용자] [옵션];

-- ✅ 예시 1: U1에게 학생 테이블의 삽입, 삭제 권한 부여
GRANT INSERT, DELETE  -- 삽입(INSERT)과 삭제(DELETE) 권한을
ON student            -- student(학생) 테이블에 대해
TO U1;                -- U1 사용자에게 부여합니다

-- ✅ 예시 2: U2에게 학생 테이블의 검색 권한 부여 + 권한 전달 가능
GRANT SELECT          -- 검색(SELECT) 권한을
ON student            -- student 테이블에 대해
TO U2                 -- U2 사용자에게 부여하되
WITH GRANT OPTION;    -- 이 권한을 다른 사용자에게도 줄 수 있게 합니다
```

**코드 상세 설명:**

- `GRANT INSERT, DELETE`: 부여할 권한의 종류를 지정합니다. INSERT(삽입), DELETE(삭제), SELECT(조회), UPDATE(수정) 등이 있습니다.
- `ON student`: 권한이 적용될 대상 테이블(객체)을 지정합니다.
- `TO U1`: 권한을 받을 사용자(주체)를 지정합니다.
- `WITH GRANT OPTION`: **매우 중요한 옵션**입니다. 이 옵션이 있으면 권한을 받은 사용자가 **자신의 권한을 다른 사용자에게 다시 부여**할 수 있습니다. 마치 열쇠를 받은 사람이 그 열쇠를 복사해서 다른 사람에게 줄 수 있는 것과 같습니다.

:::warning WITH GRANT OPTION이 없으면?
`WITH GRANT OPTION`이 없이 권한을 받은 사용자는 자신의 권한을 다른 사용자에게 줄 수 **없습니다**. 해당 명령어를 실행하면 에러가 발생합니다.
:::

### REVOKE — 권한을 회수하는 명령어

```sql
-- 📌 기본 문법
-- REVOKE [권한] ON [테이블이름] FROM [사용자] [옵션];

-- ✅ 예시: U2에게서 학생 테이블의 검색 권한 회수
REVOKE SELECT         -- 검색(SELECT) 권한을
ON student            -- student 테이블에 대해
FROM U2               -- U2 사용자로부터 회수합니다
CASCADE;              -- U2가 다른 사람에게 준 권한도 함께 회수합니다
```

**코드 상세 설명:**

- `REVOKE SELECT`: 회수할 권한의 종류를 지정합니다.
- `FROM U2`: 권한을 빼앗을 사용자를 지정합니다. (`GRANT`에서는 `TO`, `REVOKE`에서는 `FROM`을 사용하는 점에 주의하세요.)
- `CASCADE`: **연쇄 회수** 옵션입니다. U2가 `WITH GRANT OPTION`으로 다른 사용자에게 권한을 준 경우, 그 사용자들의 권한도 **자동으로 함께 없어집니다**.

### 🔄 권한 전파와 회수의 전체 흐름 예시

실제 시나리오를 통해 권한이 어떻게 전달되고 회수되는지 살펴보겠습니다.

```sql
-- 📌 1단계: DBA(관리자)가 U1에게 권한 부여
GRANT INSERT, DELETE   -- 삽입, 삭제 권한을
ON employee            -- employee 테이블에 대해
TO U1;                 -- U1에게 부여 (WITH GRANT OPTION 없음!)

-- 📌 2단계: DBA가 U1에게 검색 권한 부여 (전달 옵션 포함)
GRANT SELECT           -- 검색 권한을
ON employee            -- employee 테이블에 대해
TO U3                  -- U3에게 부여
WITH GRANT OPTION;     -- 다른 사람에게 줄 수 있는 옵션 포함

-- ❌ 3단계: U1이 U4에게 권한을 주려고 시도
GRANT INSERT           -- U1이 가진 삽입 권한을
ON employee            -- employee 테이블에 대해
TO U4;                 -- U4에게 주려고 함
-- 🚫 에러 발생! U1은 WITH GRANT OPTION이 없으므로 권한 전달 불가

-- ✅ 4단계: U3가 U5에게 권한 부여 (가능!)
GRANT SELECT           -- U3가 가진 검색 권한을
ON employee            -- employee 테이블에 대해
TO U5;                 -- U5에게 부여 (WITH GRANT OPTION 없이)
-- ✅ 성공! U3는 WITH GRANT OPTION이 있으므로 가능

-- 📌 5단계: DBA가 U3의 권한을 회수
REVOKE SELECT          -- 검색 권한을
ON employee            -- employee 테이블에서
FROM U3                -- U3로부터 회수
CASCADE;               -- 연쇄 회수
-- 결과: U3의 권한 사라짐 → U5의 권한도 자동으로 함께 사라짐!
```

> 🔗 **권한 전파의 핵심**: `WITH GRANT OPTION`이 있는 사용자만 다른 사용자에게 권한을 줄 수 있습니다. 상위 사용자의 권한이 `REVOKE`로 회수되면, 그로부터 권한을 받은 하위 사용자들의 권한도 `CASCADE`에 의해 연쇄적으로 모두 사라집니다. 마치 나무의 뿌리(상위 권한)가 잘리면 가지(하위 권한)도 함께 떨어지는 것과 같습니다.

:::info WITH GRANT OPTION vs WITH ADMIN OPTION
- **WITH GRANT OPTION**: 일반 **객체(테이블 등)**에 대한 권한을 다른 사용자에게 전달할 수 있게 합니다. 상위 권한 회수 시 하위도 **자동 회수(CASCADE)**됩니다.
- **WITH ADMIN OPTION**: **시스템 권한**을 다른 사용자에게 전달할 수 있게 합니다. 상위 권한이 회수되어도 하위 권한은 **유지**됩니다.
:::

---

## ⚔️ 데이터베이스를 위협하는 주요 보안 공격

추론 공격 외에도 데이터베이스를 위협하는 다양한 보안 공격이 있습니다. 이들을 함께 알아야 추론 제어의 위치와 중요성을 더 잘 이해할 수 있습니다.

### 🌊 DDoS 공격 (분산 서비스 거부 공격)

**DDoS**는 **Distributed Denial of Service Attack**의 약자로, 우리말로 **분산 서비스 거부 공격**이라고 합니다.

**원리**: 서버에는 동시에 처리할 수 있는 접속자 수의 한계가 있습니다. 예를 들어 1만 명까지 동시 접속이 가능한 서버에 **좀비 PC**(악성코드에 감염된 일반인의 컴퓨터) 수만 대가 일제히 접속하면, 서버가 과부하로 다운되어 **정상적인 사용자도 서비스를 이용할 수 없게** 됩니다.

마치 **식당에 손님 1,000명이 동시에 몰려들어 주문을 하면**, 주방이 마비되어 아무에게도 음식을 내줄 수 없게 되는 것과 같습니다. 실제 손님(정상 사용자)도 밥을 먹을 수 없게 되죠.

:::warning DDoS 방어의 오해
"그러면 서버 용량(동시 접속자 수)을 늘리면 되지 않나요?" — 이것은 **근본적인 해결책이 아닙니다**. 2만 명으로 늘리면 해커는 3만 대의 좀비 PC로 공격하면 됩니다. 근본적인 방어는 **비정상 접속을 감지하여 차단하는 것**, 그리고 최근에는 **블록체인(데이터를 전 세계에 분산 저장하는 기술)**을 활용하여 특정 서버에 대한 집중 공격 자체를 무력화하는 방법이 연구되고 있습니다.
:::

### 💉 SQL 인젝션 (SQL Injection)

**SQL 인젝션**이란 **SQL 코드에 악성 코드를 주입(삽입)해서** 데이터베이스를 공격하는 기법입니다.

```sql
-- ❌ SQL 인젝션 공격 예시

-- 원래 의도된 정상 쿼리 (ID가 100번인 학생 조회)
SELECT * FROM student WHERE id = 100;

-- 🚨 해커가 입력값을 조작한 쿼리
SELECT * FROM student WHERE id = 100 OR 1=1;
-- OR 1=1을 추가하면 조건이 항상 참(TRUE)이 됩니다
-- 결과: student 테이블의 모든 데이터가 유출됩니다!

-- 🚨 더 위험한 공격: 데이터 삭제
SELECT * FROM student WHERE id = 100; DROP TABLE student;--
-- 세미콜론 뒤에 테이블 삭제 명령을 삽입
-- 결과: student 테이블이 통째로 삭제될 수 있습니다!
```

**코드 상세 설명:**

- `OR 1=1`: 이 조건은 항상 참(TRUE)이므로, WHERE 절의 필터링이 무력화됩니다. 모든 행이 조건을 만족하게 되어 전체 데이터가 반환됩니다.
- `; DROP TABLE student;--`: 세미콜론으로 원래 쿼리를 종료하고, 새로운 명령어(테이블 삭제)를 실행시킵니다. `--`는 이후의 코드를 주석 처리하여 문법 오류를 방지합니다.

```sql
-- ✅ SQL 인젝션 방어: 매개변수화된 쿼리(Parameterized Query) 사용

-- 잘못된 방법 ❌: 사용자 입력을 직접 문자열에 삽입
-- "SELECT * FROM student WHERE id = " + user_input
-- 이렇게 하면 user_input에 악성 코드가 포함될 수 있습니다

-- 올바른 방법 ✅: 매개변수를 사용하여 입력값을 안전하게 전달
-- PreparedStatement를 사용
-- "SELECT * FROM student WHERE id = ?"
-- 여기서 ?에 들어가는 값은 시스템이 자동으로 안전하게 처리합니다
-- 악성 코드가 포함되어 있어도 단순한 '문자열 값'으로만 취급됩니다
```

```python
# ✅ Python에서의 SQL 인젝션 방어 예시

import sqlite3

# 데이터베이스 연결
conn = sqlite3.connect('school.db')  # school.db 데이터베이스에 연결합니다
cursor = conn.cursor()               # 커서 객체를 생성합니다 (쿼리 실행용)

# ❌ 위험한 방법: 사용자 입력을 직접 문자열에 삽입
user_input = "100 OR 1=1"  # 악의적인 사용자가 입력한 값
# 절대 이렇게 하면 안 됩니다!
# query = f"SELECT * FROM student WHERE id = {user_input}"
# cursor.execute(query)  # 모든 학생 정보가 유출됩니다!

# ✅ 안전한 방법: 매개변수화된 쿼리 사용
user_input = "100 OR 1=1"       # 같은 악의적 입력이지만
query = "SELECT * FROM student WHERE id = ?"  # ?를 사용하여 매개변수 자리를 지정
cursor.execute(query, (user_input,))  # 입력값을 매개변수로 안전하게 전달
# 시스템이 "100 OR 1=1"을 하나의 문자열 값으로 처리하므로
# SQL 명령어로 해석되지 않아 안전합니다!

conn.close()  # 데이터베이스 연결을 종료합니다
```

**Python 코드 상세 설명:**

- `sqlite3.connect('school.db')`: SQLite 데이터베이스 파일에 연결합니다.
- `cursor = conn.cursor()`: SQL 쿼리를 실행하기 위한 커서 객체를 만듭니다.
- **위험한 방법**: f-string이나 문자열 결합으로 사용자 입력을 직접 쿼리에 넣으면, 입력값이 SQL 명령어로 해석될 수 있습니다.
- **안전한 방법**: `?` 자리표시자를 사용하고, `execute()`의 두 번째 인자로 값을 전달하면, 시스템이 입력값을 순수한 데이터로만 취급합니다. 아무리 악의적인 코드를 넣어도 실행되지 않습니다.

SQL 인젝션은 **공격 난이도는 낮지만 파괴력은 매우 큽니다**. 코드를 가로채서 조금만 변형하면 데이터 조회, 수정, 삭제가 모두 가능하기 때문입니다. 이를 방어하기 위해 **시큐어 코딩(Secure Coding, 보안 기반 프로그래밍)**이 필수적입니다.

### 🔑 인증 프로세스 공격

아이디와 패스워드 인증 과정을 **우회하거나 무력화**하는 공격입니다. 해커가 인증 절차 자체를 건너뛰거나, 아이디/패스워드를 변조하여 정당한 사용자인 것처럼 위장하는 방법입니다. **백도어(Back Door)**라고 불리는 숨겨진 우회 경로를 만들어 인증 없이 서버에 직접 침입하는 방식도 여기에 해당합니다.

---

## 🔒 보안의 다른 구성 요소들

추론 제어가 속한 데이터베이스 보안의 전체 구조를 정리해봅시다.

### Authentication (인증)

**패스워드, 생체인식(지문·홍채·안면인식), 인증서** 등을 통해 "이 사용자가 본인이 맞는가?"를 확인하는 절차입니다. 스마트폰의 잠금 해제(패턴, 비밀번호, 지문)가 대표적인 예시입니다.

### Authorization (권한 부여)

인증이 완료된 사용자에게 **어떤 데이터에 어떤 작업을 할 수 있는지** 권한을 설정하는 것입니다. 예를 들어 "학생 테이블은 조회만 가능, 수강등록 테이블은 삽입·삭제 가능"처럼 세밀하게 설정합니다.

### Confidentiality (기밀성 — 암호화)

데이터 자체에 **암호를 걸어서**, 해커가 중간에 데이터를 가로채더라도 **내용을 읽을 수 없게** 만드는 것입니다. 마치 편지 내용을 암호문으로 작성해서, 암호 키가 없으면 해독할 수 없게 하는 것과 같습니다.

### Audit (감사)

데이터베이스에서 일어나는 모든 활동을 **로그(기록) 파일**에 기록하고, 나중에 이를 검토하여 **불법적인 사용이 있었는지 확인**하는 절차입니다. "몇 월 며칠 몇 시에, 어느 PC에서, 누가, 어떤 데이터에 접근했는지"가 모두 기록됩니다.

### View (뷰)를 이용한 보안

SQL의 **View(뷰)**는 테이블의 전체 데이터 중 **필요한 부분만 보여주는 가상 테이블**입니다. 전체 테이블에는 급여, 주민번호 같은 민감한 정보가 포함되어 있지만, 뷰를 통해 이름과 부서만 보여줄 수 있습니다. 이것만으로도 **가장 쉽고 간단한 보안 방법**이 됩니다.

---

## ⚠️ 추론 제어 시 주의사항과 실무 팁

### 주의사항

:::danger 추론 제어에서 절대 하면 안 되는 것
1. **통계 쿼리에 제한을 두지 않는 것**: 아무런 제한 없이 다양한 조건의 통계 쿼리를 허용하면, 교차 분석을 통해 개인정보가 노출될 수 있습니다.
2. **소수 그룹의 통계를 그대로 보여주는 것**: 결과가 1~2건인 통계는 사실상 개인 데이터와 동일합니다. 반드시 최소 응답 크기를 설정해야 합니다.
3. **보안을 접근제어만으로 완료했다고 생각하는 것**: 접근제어는 직접적인 접근만 막을 뿐, 간접적인 추론 공격은 막을 수 없습니다.
:::

### 실무 팁

:::tip 추론 방어를 위한 실무 권장 사항
1. **쿼리 감사(Audit) 시스템을 병행하세요**: 누가 어떤 통계 쿼리를 실행했는지 기록하면, 의심스러운 추론 시도를 사후에 발견할 수 있습니다.
2. **최소 그룹 크기를 설정하세요**: 통계 결과에 포함되는 레코드가 일정 수(보통 3~5건) 미만이면 결과를 반환하지 않도록 정책을 설정하세요.
3. **노이즈 삽입과 데이터 감추기를 함께 사용하세요**: 하나의 방어 기법만으로는 완벽하지 않습니다. 여러 기법을 조합하면 방어력이 크게 높아집니다.
4. **권한 부여 테이블을 주기적으로 검토하세요**: 사용자별로 어떤 데이터에 어떤 권한이 있는지를 표로 관리하고, 불필요한 권한은 즉시 회수(`REVOKE`)하세요.
5. **뷰(View)를 적극 활용하세요**: 민감한 컬럼을 제외한 뷰를 생성하여, 불필요한 데이터 노출을 원천적으로 차단하세요.
:::

---

## 📌 핵심 정리

- **추론 제어(Inference Control)**란 공개된 데이터를 분석·추론하여 보안이 걸린 비밀 데이터를 알아내는 것을 방지하는 기법이다
- **통계 추론**은 통계 데이터를 역추적하여 개별 세부 데이터(로데이터)를 알아내는 대표적인 추론 공격이다
- 추론 방지 기법에는 **데이터 분할, 중요 데이터 감추기, 노이즈 삽입, 코드 난독화, 다중 인스턴스화** 등이 있다
- **집계(Aggregation)**는 낮은 등급의 데이터를 대량으로 모아 높은 등급의 정보를 파악하는 공격이다
- 데이터베이스 접근제어는 **DAC(임의), MAC(강제), RBAC(역할)** 세 가지로 분류된다
- **GRANT**는 권한을 부여하고, **REVOKE**는 권한을 회수하는 SQL 명령어이다
- **WITH GRANT OPTION**이 있어야 받은 권한을 다른 사용자에게 전달할 수 있다
- 상위 권한이 REVOKE되면 **CASCADE**에 의해 하위 권한도 연쇄적으로 회수된다
- **DDoS**는 좀비 PC를 이용한 서버 과부하 공격이고, **SQL 인젝션**은 SQL 코드에 악성 코드를 주입하는 공격이다
- 추론 제어는 접근제어, 정보 흐름 제어와 **함께 사용**되어야 데이터베이스 보안이 완성된다

작성일: 2026-02-21