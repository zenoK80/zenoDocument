---
title: '검사기(Scanner)와 파서(Parser) 이해하기'
description: 'SQL이 들어왔을 때 첫 번째로 하는 일 - 검사기와 파서의 역할을 배워봅시다'
slug: 'database/scanner-parser'
sidebar_label: '검사기와 파서'
sidebar_position: 3
date: '2025-02-01'
---

# 검사기(Scanner)와 파서(Parser)

## 🎯 이번 시간의 목표

SQL 질의어가 들어왔을 때 **가장 먼저 하는 2가지 단계**를 배웁니다:
1. **검사기**: "이게 어떤 명령어야?"
2. **파서**: "문법이 맞아?"

---

## 1️⃣ 검사기 (Scanner)

### 검사기가 하는 일

검사기는 **들어온 SQL을 읽으면서 각 요소를 식별**합니다.

```
입력: SELECT * FROM 학생;

검사기의 생각:
"SELECT" → 이건 SELECT 명령어네
"*" → 모든 열을 선택하는 기호네
"FROM" → FROM 절이 있네
"학생" → 테이블 이름은 '학생'이구나
```

### 토큰(Token)이란?

SQL을 구성하는 **작은 단위들**을 토큰이라고 합니다.

| 토큰 | 의미 |
|------|------|
| `SELECT` | 선택 명령어 |
| `*` | 모든 열 |
| `FROM` | 어떤 테이블에서 |
| `WHERE` | 조건 |
| `학생` | 테이블 이름 |

:::tip 검사기의 역할 정리
검사기 = 토큰을 식별하는 도구
- SQL을 하나하나 읽으면서
- 각 단어가 무엇인지 파악하고
- 토큰 목록을 만들어낸다
:::

### 검사기 동작 예시

```
📝 SQL 명령어:
SELECT * FROM 학생 WHERE 성별='남자';

🔍 검사기 분석:
┌────────┬──────┬─────────┬────┬──────────┬──────┬─────────┐
│SELECT  │ *    │ FROM    │학생 │ WHERE   │성별  │='남자'  │
└────────┴──────┴─────────┴────┴──────────┴──────┴─────────┘
   ↓      ↓       ↓       ↓      ↓        ↓       ↓
   ✓      ✓       ✓       ✓      ✓        ✓       ✓
 (모든 토큰 식별됨)
```

---

## 2️⃣ 파서 (Parser)

### 파서가 하는 일

파서는 **검사기에서 나온 토큰들의 문법이 올바른지 확인**합니다.

```
파서의 역할:
"SELECT * FROM 학생?" 
→ SELECT (SELECT 명령어는?) FROM (테이블은?) WHERE (조건은?)
→ "네, 문법이 정확합니다! ✅"
```

### 문법 검증 (Syntax Check)

:::info 파서는 컴파일러처럼 작동합니다
자바나 파이썬 같은 프로그래밍 언어에서 코드를 **컴파일**할 때 문법을 검사하죠?
파서도 똑같이 SQL의 **문법을 검사**합니다!
:::

### 올바른 문법 vs 잘못된 문법

#### ✅ 올바른 문법
```sql
SELECT 이름, 학번 FROM 학생 WHERE 성별='남자';
```
- SELECT로 시작 ✓
- FROM절이 있음 ✓
- WHERE절이 있음 ✓
- 모든 키워드가 올바른 위치에 있음 ✓

#### ❌잘못된 문법
```sql
SELEC 이름 FROM 학생;
```
- `SELEC`은 존재하지 않는 명령어 ✗
- 파서가 에러를 발견! 🛑

```sql
SELECT 이름 WHERE 학생;
```
- FROM절이 없음 ✗
- 파서가 에러를 발견! 🛑

---

## 🔗 검사기와 파서의 협력

### 전체 흐름

```
📝 SQL 입력
    ⬇️
┌──────────────────────────┐
│  🔍 검사기 (Scanner)     │
│ - 토큰으로 분해          │
│ - SELECT, *, FROM, 학생  │
└──────────────────────────┘
    ⬇️
📊 토큰 목록
    ⬇️
┌──────────────────────────┐
│  ✍️ 파서 (Parser)        │
│ - 토큰 배열의 문법 확인   │
│ - "문법이 맞나요?"        │
└──────────────────────────┘
    ⬇️
✅ 문법 검증 성공!
    ⬇️
📄 내부 형태 질의문 생성
    ⬇️
다음 단계로 (최적화기)
```

---

## 📚 실전 예시

### 예제 1: 간단한 SELECT

```sql
SELECT * FROM 학생;
```

| 단계 | 검사기 | 파서 |
|------|--------|------|
| **입력** | SQL을 읽음 | - |
| **처리** | 토큰 식별<br/>SELECT, *, FROM, 학생 | 문법 검증 |
| **결과** | 토큰 목록 생성 | ✅ 문법 정상 |

### 예제 2: 조건이 있는 SELECT

```sql
SELECT 학번, 이름 
FROM 학생 
WHERE 성별='남자' AND 점수>80;
```

**검사기 동작:**
```
토큰 식별:
SELECT → 명령어
학번, 이름 → 컬럼명
FROM → 테이블 시작
학생 → 테이블명
WHERE → 조건 시작
성별, '남자' → 비교값
AND → 논리연산
점수, 80 → 조건
✓ 모든 토큰 식별 완료
```

**파서 동작:**
```
문법 검증:
- SELECT 뒤에 컬럼명이 있나? ✓
- FROM 뒤에 테이블명이 있나? ✓
- WHERE 뒤에 조건이 있나? ✓
- AND로 여러 조건이 연결되었나? ✓
✓ 모든 문법이 정확함
```

---

## 💻 코드 레벨 이해 (선택사항)

### 의사코드로 본 검사기 동작

```javascript
// 검사기 의사코드
function scanner(sqlQuery) {
  let tokens = [];  // 토큰을 저장할 배열
  let i = 0;        // 문자 위치
  
  while (i < sqlQuery.length) {
    // 공백 건너뛰기
    if (isWhitespace(sqlQuery[i])) {
      i++;
      continue;
    }
    
    // 키워드 확인
    if (isKeyword(sqlQuery[i])) {
      tokens.push(getKeyword());  // SELECT, FROM 등을 토큰으로 추가
    }
    
    // 테이블/컬럼명 확인
    else if (isIdentifier(sqlQuery[i])) {
      tokens.push(getIdentifier());  // 학생, 이름 등을 토큰으로 추가
    }
    
    i++;
  }
  
  return tokens;  // 토큰 목록 반환
}

// 파서 의사코드
function parser(tokens) {
  // 첫 번째 토큰이 SELECT인가?
  if (tokens[0] !== 'SELECT') {
    return false;  // 문법 오류
  }
  
  // 다음에 컬럼명이 있는가?
  if (!isColumnName(tokens[1])) {
    return false;  // 문법 오류
  }
  
  // FROM 토큰이 있는가?
  if (!hasToken(tokens, 'FROM')) {
    return false;  // 문법 오류
  }
  
  return true;  // 문법 정상!
}
```

**코드 설명:**
- `scanner()` 함수: SQL을 하나씩 읽으면서 토큰 만들기
- `parser()` 함수: 토큰들이 올바른 순서로 배열되어 있는지 확인
- 문법 오류가 있으면 `false` 반환하여 처리 중단

---

## ⚠️ 흔한 오류와 해결

### 검사기가 잡지 못하는 오류 (파서가 잡음)

```sql
SELECT 이름 FROM 123;  ❌
```
- 검사기: "SELECT, 이름, FROM, 123" ← 모두 식별
- 파서: "잠깐, 123은 테이블 이름이 될 수 없어!" → 오류 발견

### 파서가 잡지 못하는 오류 (다음 단계에서 발견)

```sql
SELECT * FROM 없는테이블;
```
- 검사기: "모든 토큰 식별 ✓"
- 파서: "문법이 정확 ✓"
- 런타임: "없는테이블이라는 테이블이 없어요!" → 오류 발생

:::info 오류 찾는 순서
1. 검사기 → 토큰 오류
2. 파서 → 문법 오류
3. 실행 단계 → 데이터 오류
:::

---

## 🎯 핵심 요점 정리

:::note 꼭 기억하세요!

**검사기 (Scanner)**
- SQL을 읽으면서 **토큰으로 분해**
- 각 단어가 무엇인지 식별
- 예: SELECT, FROM, WHERE, 테이블명 등

**파서 (Parser)**
- 토큰들의 **순서와 구조가 문법적으로 맞는지 확인**
- SELECT는 맨 앞? FROM은 있나? WHERE는 적절한 위치에?
- 프로그래밍 언어의 컴파일러처럼 작동

**검사기와 파서의 목표**
- SQL을 **처리 가능한 형태**로 변환
- 명백한 오류를 **빨리 발견**
- 다음 단계(최적화)를 위한 준비
:::

---

## 📖 복습 문제

### 문제 1: 다음 SQL에서 검사기가 식별하는 토큰들은?
```sql
SELECT 학번 FROM 학생 WHERE 성별='여자';
```

<details>
<summary>정답 보기</summary>

토큰: SELECT, 학번, FROM, 학생, WHERE, 성별, '여자'

</details>

### 문제 2: 다음 SQL에서 파서가 발견할 오류는?
```sql
SELECT FROM 학생;
```

<details>
<summary>정답 보기</summary>

SELECT 다음에 컬럼명이 없음 → 문법 오류!

</details>

---
